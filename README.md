# 健康检查管理系统 - 需求文档

## 项目概述

本项目是一个健康检查管理系统，包含前端 Vue 应用和后端 Spring Boot 服务，用于管理用户健康数据、预约服务、通知等功能。本文档详细描述了系统的功能需求、数据结构和接口设计。

## 目录

- [状态说明](#状态说明)
- [数据字段](#数据字段)
- [系统角色](#系统角色)
- [角色功能点](#角色功能点)
- [系统菜单](#系统菜单)
- [API 接口](#api接口)
- [项目开发指南](#项目开发指南)

## 状态说明

### 通知状态

- 待受理
- 已受理

### 预约状态

- 待受理
- 已受理

## 数据字段

### 健康数据表

- 血压(收缩压/舒张压 mmHg)
- 心率(次/分钟)
- 空腹血糖(mmol/L)
- 体重(KG)

### 人员信息表

- ID
- 姓名
- 性别
- 年龄
- 手机号

### 预约数据表

- ID
- 人员信息表关联
- 预约内容（健康数据表字段任意指标拼接）
- 创建时间
- 预约时间

### 通知数据表

- ID
- 人员信息表关联
- 创建时间
- 通知受理状态

### 健康管理数据表

- ID
- 人员信息表字段
- 健康数据表字段
- 创建时间

## 系统角色

### 角色划分

系统通过登录账号密码区分用户角色和管理角色：

- 普通用户：rid = 1
- 系统管理员：rid = 6
- 测试账号：rid = 13

### 新增用户规则

- 用户账号信息写入 user 表
- id 关联 hr_role 表的 hr_id
- hr_role 表中 rid 默认为 1（普通用户）

## 角色功能点

### 用户角色

#### 1. 健康管理

- **数据列表**：以当前用户 ID 为维度分页展示健康管理数据表字段所有数据
- **生成 AI 报告按钮**：点击后调用 openAi 接口，将用户健康记录列表字段作为参数，返回分析报告

#### 2. 通知管理

- **通知列表**：以当前用户 ID 为维度分页展示该用户所有推送的数据，列表字段为通知数据表字段
- **推送内容**：通知数据表所有字段
- **紧急求助按钮**：系统一键求助按钮，推送数据至管理角色系统通知表

#### 3. 预约管理

- **新增按钮**：跳转至预约表单页面
- **预约列表**：以当前用户 ID 为维度分页展示该用户所有添加的数据
  - 列表字段：预约数据表字段 & 操作
  - 操作功能：
    - 取消预约：仅待受理状态可取消，点击取消该数据从预约数据表删除
    - 修改：仅待受理状态可修改，点击跳转至预约表单进行编辑
- **预约表单**：
  - 默认展示字段：当前账号对应的人员信息表字段
  - 可编辑表单项：
    - 预约内容（健康数据表字段下拉多选）
    - 预约时间（日期时间选择器）
  - 保存操作：生成一条数据到预约数据表

### 管理角色

#### 1. 所有用户

- **数据列表**：人员信息表字段、操作
  - 操作功能：修改、查看
- **新增按钮**：跳转至账号创建页面
  - 编辑字段：人员信息表字段 & 用户账号 & 用户密码
  - 新增用户角色遵循（新增用户角色划分规则）
- **用户明细**：由操作栏修改/查看跳转
  - 默认展示：列表中的所有字段
  - 修改操作：可修改所有字段

#### 2. 健康管理

- **数据列表**：以当前用户 ID 为维度分页展示该用户创建时间最新的一条数据
  - 展示字段：健康管理数据表字段 & 操作
  - 操作功能：上报信息
- **上报信息**：由操作栏上报信息按钮跳转至上报表单页面
  - 可上报字段：该用户健康数据表中所有字段、备注
  - 操作结果：生成一条新的健康数据
- **数据明细**：
  - 默认维度：按周为维度对该用户的所有健康管理数据表数据生成 echart 数据分析
  - 支持维度切换：按月、按年度进行分析

#### 3. 通知管理

- **通知列表**：以当前用户 ID 为维度分页展示该用户创建时间最新的一条数据
  - 展示字段：通知数据表字段 & 操作
  - 操作功能：受理（点击时通知受理状态为已受理）

#### 4. 预约管理

- **预约列表**：以当前用户 ID 为维度分页展示该用户创建时间最新的一条数据
  - 展示字段：预约数据表字段、操作
  - 操作功能：受理（点击时通知状态为已受理）

## 系统菜单

### 通用菜单（用户角色和管理角色可见）

1. 服务中心
   - 1.1 预约管理
   - 1.2 健康管理
2. 系统管理
   - 3.1 通知管理

### 管理员专属菜单

2. 用户管理（仅管理角色可见）
   - 2.1 所有用户

## API 接口

### 1. 服务中心

#### 1.1 预约管理

- 新增预约
- 取消预约
- 修改预约
- 查询预约列表
- 查询预约明细

#### 1.2 健康管理

- 查询数据列表
- 生成 AI 报告
- 上报健康信息

### 2. 用户管理（仅管理角色可见）

#### 2.1 所有用户

- 查询用户列表
- 查询单个用户明细
- 新增用户
- 修改用户

### 3. 系统管理

#### 3.1 通知管理

- 查询通知列表
- 新增通知推送内容
- 修改通知推送状态

## 项目开发指南

### 推荐的 IDE 配置

为了获得最佳开发体验，推荐以下 IDE 配置：
- [VSCode](https://code.visualstudio.com/) + [Volar](https://marketplace.visualstudio.com/items?itemName=Vue.volar)（禁用 Vetur） + [TypeScript Vue Plugin (Volar)](https://marketplace.visualstudio.com/items?itemName=Vue.vscode-typescript-vue-plugin)

### 项目设置

在开始开发前，请先安装项目依赖：

```sh
npm install
```

### 开发模式（实时编译和热重载）

启动开发服务器，支持实时编译和热重载：

```sh
npm run dev
```

### 生产环境构建（编译和压缩）

为生产环境构建应用程序（代码会被编译和压缩）：

```sh
npm run build
```

### 配置参考

有关项目配置的详细信息，请参阅 [Vite 配置参考文档](https://vitejs.dev/config/)
